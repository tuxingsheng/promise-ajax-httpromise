!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.$http=e()}(this,function(){"use strict";function t(t){this.defers=[],this.state=f,this.value=void 0;var e=this;try{t(function(t){e.resolve(t)},function(t){e.reject(t)})}catch(t){e.reject(t)}}function e(t){return"function"==typeof t}function n(){}function r(t){return null==t?String(t):T[{}.toString.call(t)]||"object"}function o(t,e){var n=[];return n.add=function(t,e){this.push(encodeURIComponent(t)+"="+encodeURIComponent(e))},x.serialize(n,t,e),n.join("&").replace(/%20/g,"+")}function a(t){return null!==t&&"object"===("undefined"==typeof t?"undefined":v(t))}function i(t){return a(t)&&Object.getPrototypeOf(t)==Object.prototype}function s(t,e,n){if(!t)return this;if("number"==typeof t.length)[].every.call(t,function(t,n){return e.call(t,n,t)!==!1});else for(var r in t)if(n){if(ele.hasOwnProperty(r)&&e.call(t[r],r,t[r])===!1)return t}else if(e.call(t[r],r,t[r])===!1)return t}function u(){}var c=[],p=function(t){c.push(t),1==c.length&&setTimeout(l,0)},l=function(){for(;c.length;)c[0](),c.shift()},f="pending",d="resolved",y="rejected";t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})};var h=t.prototype;h.constructor=t,h.resolve=function(t){var e=this;t!=e&&(e.state=d,e.value=t,e.notify())},h.reject=function(t){var e=this;t!=e&&(e.state=y,e.value=t,e.notify())},h.then=function(e,n){var r=this;return new t(function(t,o){r.defers.push({onResolved:e,onRejected:n,resolve:t,reject:o}),r.notify()})},h.catch=function(t){return this.then(void 0,t)},h.notify=function(){var t=this;p(function(){if(t.state!=f)for(;t.defers.length;){var n=t.defers.shift(),r=n.onResolved,o=n.onRejected,a=n.resolve,i=n.reject;t.state===d&&a(e(r)?r.call(null,t.value):t.value),t.state===y&&i(e(o)?o.call(null,t.value):t.value)}})};var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.prototype.constructor=n,n.prototype.post=function(t,e){return x.ajaxSettings.type="POST",this.ajax(t,e)},n.prototype.get=function(t,e){return x.ajaxSettings.type="GET",this.ajax(t,e)},n.prototype.put=function(t,e){return x.ajaxSettings.type="PUT",this.ajax(t,e)},n.prototype.delete=function(t,e){return x.ajaxSettings.type="DELETE",this.ajax(t,e)},n.prototype.ajax=function(e,n){return"object"===("undefined"==typeof e?"undefined":v(e))&&(n=e,e=void 0),new t(function(t,r){x.ajax(e,n,t,r)})};var x={};x.jsonType="application/json",x.htmlType="text/html",x.rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x.scriptTypeRE=/^(?:text|application)\/javascript/i,x.xmlTypeRE=/^(?:text|application)\/xml/i,x.blankRE=/^\s*$/,x.ajaxSettings={type:"GET",beforeSend:u,context:null,xhr:function(t){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:x.jsonType,xml:"application/xml, text/xml",html:x.htmlType,text:"text/plain"},timeout:0,processData:!0,cache:!0},x.ajaxBeforeSend=function(t,e){var n=e.context;if(e.beforeSend.call(n,t,e)===!1)return!1},x.serialize=function(t,e,n,o){var a,u=m(e),c=i(e);s(e,function(e,i){a=r(i),o&&(e=n?o:o+"["+(c||"object"===a||"array"===a?e:"")+"]"),!o&&u?t.add(i.name,i.value):"array"===a||!n&&"object"===a?x.serialize(t,i,n,e):t.add(e,i)})},x.serializeData=function(t){t.processData&&t.data&&"string"!=typeof t.data&&(t.data=o(t.data,t.traditional)),!t.data||t.type&&"GET"!==t.type.toUpperCase()||(t.url=x.appendQuery(t.url,t.data),t.data=void 0)},x.appendQuery=function(t,e){return""===e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")},x.mimeToDataType=function(t){return t&&(t=t.split(";",2)[0]),t&&(t===x.htmlType?"html":t===x.jsonType?"json":scriptTypeRE.test(t)?"script":xmlTypeRE.test(t)&&"xml")||"text"},x.parseArguments=function(t,e,n,r){return isFunction(e)&&(r=n,n=e,e=void 0),isFunction(n)||(r=n,n=void 0),{url:t,data:e,success:n,dataType:r}},x.ajax=function(t,e,n,r){var o=e||{};o.url=t||o.url;for(var a in x.ajaxSettings)void 0===o[a]&&(o[a]=x.ajaxSettings[a]);x.serializeData(o);var i=o.dataType;o.cache!==!1&&(e&&e.cache===!0||"script"!==i)||(o.url=x.appendQuery(o.url,"_="+$.now()));var s,c=o.accepts[i&&i.toLowerCase()],p={},l=function(t,e){p[t.toLowerCase()]=[t,e]},f=/^([\w-]+:)\/\//.test(o.url)?RegExp.$1:window.location.protocol,d=o.xhr(o),y=d.setRequestHeader;if(l("X-Requested-With","XMLHttpRequest"),l("Accept",c||"*/*"),(c=o.mimeType||c)&&(c.indexOf(",")>-1&&(c=c.split(",",2)[0]),d.overrideMimeType&&d.overrideMimeType(c)),(o.contentType||o.contentType!==!1&&o.data&&"GET"!==o.type.toUpperCase())&&l("Content-Type",o.contentType||"application/x-www-form-urlencoded"),o.headers)for(var h in o.headers)l(h,o.headers[h]);if(d.setRequestHeader=l,d.onreadystatechange=function(){if(4===d.readyState){d.onreadystatechange=u,clearTimeout(s);var t,e=!1,a="file:"===f;if(d.status>=200&&d.status<300||304===d.status||0===d.status&&a&&d.responseText){i=i||x.mimeToDataType(o.mimeType||d.getResponseHeader("content-type")),t=d.responseText;try{"script"===i?(0,eval)(t):"xml"===i?t=d.responseXML:"json"===i&&(t=x.blankRE.test(t)?null:j(t))}catch(t){e=t}e?r({error:e,status:"parsererror",xhr:d,settings:o}):n(t)}else{var c=d.status?"error":"abort",p=d.statusText||null;a&&(c="error",p="404"),r({error:p,status:c,xhr:d,settings:o})}}},x.ajaxBeforeSend(d,o)===!1)return d.abort(),r({error:null,status:"abort",xhr:d,settings:o}),d;if(o.xhrFields)for(var h in o.xhrFields)d[h]=o.xhrFields[h];var v=!("async"in o)||o.async;d.open(o.type.toUpperCase(),o.url,v,o.username,o.password);for(var h in p)y.apply(d,p[h]);return o.timeout>0&&(s=setTimeout(function(){d.onreadystatechange=u,d.abort(),r({error:null,status:"timeout",xhr:d,settings:o})},o.timeout)),d.send(o.data?o.data:null),d};var m=Array.isArray,j=JSON.parse,T={};s(["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],function(t,e){T["[object "+e+"]"]=e.toLowerCase()});var g=new n;return g});
