!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.$http=e()}(this,function(){"use strict";function t(t){this.defers=[],this.state=y,this.value=void 0;var e=this;try{t(function(t){e.resolve(t)},function(t){e.reject(t)})}catch(t){e.reject(t)}}function e(t){return"function"==typeof t}function n(){}function r(t){return null==t?String(t):T[{}.toString.call(t)]||"object"}function o(t,e){var n=[];return n.add=function(t,e){this.push(encodeURIComponent(t)+"="+encodeURIComponent(e))},x.serialize(n,t,e),n.join("&").replace(/%20/g,"+")}function a(t){return null!==t&&"object"===("undefined"==typeof t?"undefined":m(t))}function i(t){return a(t)&&Object.getPrototypeOf(t)==Object.prototype}function u(t,e,n){if(!t)return this;if("number"==typeof t.length)[].every.call(t,function(t,n){return e.call(t,n,t)!==!1});else for(var r in t)if(n){if(ele.hasOwnProperty(r)&&e.call(t[r],r,t[r])===!1)return t}else if(e.call(t[r],r,t[r])===!1)return t}function s(){}var c=[],p=function(t){c.push(t),1==c.length&&setTimeout(f,0)},f=function(){for(;c.length;)c[0](),c.shift()},l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y="pending",d="resolved",v="rejected";t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.all=function(e){return new t(function(n,r){function o(t){return function(r){i[t]=r,a+=1,a===e.length&&n(i)}}var a=0,i=[];0===e.length&&n(i);for(var u=0;u<e.length;u++)t.resolve(e[u]).then(o(u),r)})},t.race=function(e){return new t(function(n,r){for(var o=0;o<e.length;o++)t.resolve(e[o]).then(n,r)})};var h=t.prototype;h.constructor=t,h.resolve=function(e){var n=this;if(e!=n){if(e instanceof t){var r=function(){var t=!1,r=e&&e.then;if(e&&"object"===("undefined"==typeof e?"undefined":l(e))&&"function"==typeof r)return r.call(e,function(e){t||n.resolve(e),t=!0},function(e){t||n.reject(e),t=!0}),{v:void 0}}();if("object"===("undefined"==typeof r?"undefined":l(r)))return r.v}n.state=d,n.value=e,n.notify()}},h.reject=function(t){var e=this;t!=e&&(e.state=v,e.value=t,e.notify())},h.then=function(e,n){var r=this;return new t(function(t,o){r.defers.push({onResolved:e,onRejected:n,resolve:t,reject:o}),r.notify()})},h.catch=function(t){return this.then(void 0,t)},h.notify=function(){var t=this;p(function(){if(t.state!=y)for(;t.defers.length;){var n=t.defers.shift(),r=n.onResolved,o=n.onRejected,a=n.resolve,i=n.reject;t.state===d&&a(e(r)?r.call(null,t.value):t.value),t.state===v&&i(e(o)?o.call(null,t.value):t.value)}})};var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.prototype.constructor=n,n.prototype.all=function(e){return t.all(e)},n.prototype.race=function(e){return t.race(e)},n.prototype.post=function(t,e){return x.ajaxSettings.type="POST",this.ajax(t,e)},n.prototype.get=function(t,e){return x.ajaxSettings.type="GET",this.ajax(t,e)},n.prototype.put=function(t,e){return x.ajaxSettings.type="PUT",this.ajax(t,e)},n.prototype.delete=function(t,e){return x.ajaxSettings.type="DELETE",this.ajax(t,e)},n.prototype.ajax=function(e,n){return"object"===("undefined"==typeof e?"undefined":m(e))&&(n=e,e=void 0),new t(function(t,r){x.ajax(e,n,t,r)})};var x={};x.jsonType="application/json",x.htmlType="text/html",x.rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x.scriptTypeRE=/^(?:text|application)\/javascript/i,x.xmlTypeRE=/^(?:text|application)\/xml/i,x.blankRE=/^\s*$/,x.ajaxSettings={type:"GET",beforeSend:s,context:null,xhr:function(t){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:x.jsonType,xml:"application/xml, text/xml",html:x.htmlType,text:"text/plain"},timeout:0,processData:!0,cache:!0},x.ajaxBeforeSend=function(t,e){var n=e.context;if(e.beforeSend.call(n,t,e)===!1)return!1},x.serialize=function(t,e,n,o){var a,s=j(e),c=i(e);u(e,function(e,i){a=r(i),o&&(e=n?o:o+"["+(c||"object"===a||"array"===a?e:"")+"]"),!o&&s?t.add(i.name,i.value):"array"===a||!n&&"object"===a?x.serialize(t,i,n,e):t.add(e,i)})},x.serializeData=function(t){t.processData&&t.data&&"string"!=typeof t.data&&(t.data=o(t.data,t.traditional)),!t.data||t.type&&"GET"!==t.type.toUpperCase()||(t.url=x.appendQuery(t.url,t.data),t.data=void 0)},x.appendQuery=function(t,e){return""===e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")},x.mimeToDataType=function(t){return t&&(t=t.split(";",2)[0]),t&&(t===x.htmlType?"html":t===x.jsonType?"json":scriptTypeRE.test(t)?"script":xmlTypeRE.test(t)&&"xml")||"text"},x.parseArguments=function(t,e,n,r){return isFunction(e)&&(r=n,n=e,e=void 0),isFunction(n)||(r=n,n=void 0),{url:t,data:e,success:n,dataType:r}},x.ajax=function(t,e,n,r){var o=e||{};o.url=t||o.url;for(var a in x.ajaxSettings)void 0===o[a]&&(o[a]=x.ajaxSettings[a]);x.serializeData(o);var i=o.dataType;o.cache!==!1&&(e&&e.cache===!0||"script"!==i)||(o.url=x.appendQuery(o.url,"_="+$.now()));var u,c=o.accepts[i&&i.toLowerCase()],p={},f=function(t,e){p[t.toLowerCase()]=[t,e]},l=/^([\w-]+:)\/\//.test(o.url)?RegExp.$1:window.location.protocol,y=o.xhr(o),d=y.setRequestHeader;if(f("X-Requested-With","XMLHttpRequest"),f("Accept",c||"*/*"),(c=o.mimeType||c)&&(c.indexOf(",")>-1&&(c=c.split(",",2)[0]),y.overrideMimeType&&y.overrideMimeType(c)),(o.contentType||o.contentType!==!1&&o.data&&"GET"!==o.type.toUpperCase())&&f("Content-Type",o.contentType||"application/x-www-form-urlencoded"),o.headers)for(var v in o.headers)f(v,o.headers[v]);if(y.setRequestHeader=f,y.onreadystatechange=function(){if(4===y.readyState){y.onreadystatechange=s,clearTimeout(u);var t,e=!1,a="file:"===l;if(y.status>=200&&y.status<300||304===y.status||0===y.status&&a&&y.responseText){i=i||x.mimeToDataType(o.mimeType||y.getResponseHeader("content-type")),t=y.responseText;try{"script"===i?(0,eval)(t):"xml"===i?t=y.responseXML:"json"===i&&(t=x.blankRE.test(t)?null:b(t))}catch(t){e=t}e?r({error:e,status:"parsererror",xhr:y,settings:o}):n(t)}else{var c=y.status?"error":"abort",p=y.statusText||null;a&&(c="error",p="404"),r({error:p,status:c,xhr:y,settings:o})}}},x.ajaxBeforeSend(y,o)===!1)return y.abort(),r({error:null,status:"abort",xhr:y,settings:o}),y;if(o.xhrFields)for(var v in o.xhrFields)y[v]=o.xhrFields[v];var h=!("async"in o)||o.async;y.open(o.type.toUpperCase(),o.url,h,o.username,o.password);for(var v in p)d.apply(y,p[v]);return o.timeout>0&&(u=setTimeout(function(){y.onreadystatechange=s,y.abort(),r({error:null,status:"timeout",xhr:y,settings:o})},o.timeout)),y.send(o.data?o.data:null),y};var j=Array.isArray,b=JSON.parse,T={};u(["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],function(t,e){T["[object "+e+"]"]=e.toLowerCase()});var g=new n;return g});
